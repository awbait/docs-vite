import{_ as s,c as a,o as n,a as e}from"./app.a1c761f2.js";const A=JSON.parse('{"title":"Commands","description":"","frontmatter":{},"headers":[{"level":3,"title":"Namespaces","slug":"namespaces","link":"#namespaces","children":[]}],"relativePath":"devops/kubernetes/commands.md","lastUpdated":1665449504000}'),l={name:"devops/kubernetes/commands.md"},p=e(`<h1 id="commands" tabindex="-1">Commands <a class="header-anchor" href="#commands" aria-hidden="true">#</a></h1><p>\u0412\u044B\u0432\u0435\u0441\u0442\u0438 \u043A\u043E\u043C\u0430\u043D\u0434\u0443 \u0434\u043B\u044F \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F \u043D\u043E\u0432\u043E\u0433\u043E \u0443\u0437\u043B\u0430 \u043A \u043A\u043B\u0430\u0441\u0442\u0435\u0440\u0443:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubeadm token create --print-join-command</span></span>
<span class="line"></span></code></pre></div><p>\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u043B\u0430\u0441\u0442\u0435\u0440:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubeadm init --apiserver-advertise-address=</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">MASTER_IP</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> --pod-network-cidr=10.100.0.0/16</span></span>
<span class="line"></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">--control-plane-endpoint : set the shared endpoint for all control-plane nodes. Can be DNS/IP</span></span>
<span class="line"><span style="color:#A6ACCD;">--pod-network-cidr : Used to set a Pod network add-on CIDR</span></span>
<span class="line"><span style="color:#A6ACCD;">--cri-socket : Use if have more than one container runtime to set runtime socket path</span></span>
<span class="line"><span style="color:#A6ACCD;">--apiserver-advertise-address : Set advertise address for this particular control-plane node&#39;s API server</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043D\u043E\u0434\u0443 \u0438\u0437 \u043A\u043B\u0430\u0441\u0442\u0435\u0440\u0430:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl drain </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">node-name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> --ignore-daemonsets --delete-emptydir-data</span></span>
<span class="line"><span style="color:#A6ACCD;">kubectl delete node </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">node-name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">kubeadm reset </span><span style="color:#676E95;"># \u043D\u0430 \u0443\u0437\u043B\u0435 \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u0443\u0434\u0430\u043B\u0438\u043B\u0438</span></span>
<span class="line"></span></code></pre></div><p>\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u043E\u0432 \u043D\u043E\u0434:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl describe nodes </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> awk </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/Allocated resources/,/Events/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> head -n-1</span></span>
<span class="line"></span></code></pre></div><p>\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0441\u0435 \u0447\u0442\u043E \u0435\u0441\u0442\u044C \u0432 \u043A\u043B\u0430\u0441\u0442\u0435\u0440\u0435:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl get all,cm,secret,ing -A</span></span>
<span class="line"></span></code></pre></div><p>\u041F\u043E\u043B\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u043D\u043E\u0434\u0430\u0445:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl describe nodes</span></span>
<span class="line"></span></code></pre></div><p>\u041E\u0442\u043A\u0430\u0442\u0438\u0442\u044C \u0432\u043D\u0435\u0441\u0435\u043D\u043D\u044B\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl reset</span></span>
<span class="line"></span></code></pre></div><p>\u041D\u0430\u0437\u043D\u0430\u0447\u0438\u0442\u044C \u043C\u0435\u0442\u043A\u0443 \u0434\u043B\u044F \u043D\u043E\u0434\u044B:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl label nodes </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">your-node-name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">label</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u041D\u0430\u0437\u043D\u0430\u0447\u0438\u0442\u044C \u0440\u043E\u043B\u044C \u0432\u043E\u0440\u043A\u0435\u0440-\u0443\u0437\u043B\u0443:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl label node </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">node-name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> node-role.kubernetes.io/worker=worker</span></span>
<span class="line"></span></code></pre></div><h3 id="namespaces" tabindex="-1">Namespaces <a class="header-anchor" href="#namespaces" aria-hidden="true">#</a></h3><p>\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0441\u0442\u0432\u043E:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl create ns </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">namespace</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0441\u0442\u0432\u043E:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl delete ns </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">namespace</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0435 \u0438\u0437 namespace:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl delete all --all -n </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">namespace</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u0447\u0430\u0440\u0442\u0430:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">helm dependency update </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">chart-name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0441\u0442\u0432\u043E:</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl config set-context --current --namespace=</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">namespace</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u041E\u0441\u0442\u0430\u043B\u044C\u043D\u043E\u0435</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl scale statefulsets elasticsearch-master --replicas=0 -n efk</span></span>
<span class="line"><span style="color:#A6ACCD;">kubectl -n efk get secret elastic-certificates -o jsonpath=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{.data.elastic-certificates\\.p12}</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> base64 --decode </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> openssl pkcs12 -info</span></span>
<span class="line"><span style="color:#A6ACCD;">curl -u elastic:changeme http://elasticsearch-master:9200/_cluster/health</span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;">pretty=true</span></span>
<span class="line"></span></code></pre></div>`,33),o=[p];function c(t,r,d,i,D,y){return n(),a("div",null,o)}const b=s(l,[["render",c]]);export{A as __pageData,b as default};

### Подключение к серийной консоли

Шаблон команды подключения для Linux:
```bash
ssh -t -p 9600 -o IdentitiesOnly=yes -i ~/.ssh/<имя закрытого ключа> <ID виртуальной машины>.<имя пользователя>@serialssh.cloud.yandex.net
```
Чтобы отключиться от серийной консоли, нажмите клавишу `Enter`, а затем введите символы `~.` (тильда и точка). В терминалах Linux для отключения также можно использовать комбинацию клавиш **Ctrl + D**.

### Остановить все операции записи на диск
Заморозка файловой системы
```bash
sync
fsfreeze -f <точка монтирования>
```

> [!warning] Важно!
> Не выходите из консоли (logout), в которой заморозили файловую систему, до разморозки системы после создания снимка.

После создания снимка выполняем команду
```bash
fsfreeze --unfreeze <точка монтирования>
```
### Создание публичного образа YC
Выполняем команду:
```bash
yc resource-manager folders list
```
Получим что-то подобное:
```
+----------------------+---------+--------+--------+
|          ID          |  NAME   | LABELS | STATUS |
+----------------------+---------+--------+--------+
| b1gdf1scqef5bpqrpo5j | default |        | ACTIVE |
+----------------------+---------+--------+--------
```
Копируем название каталога, где хранится образ. В примере `default`.
Назначаем системной группе `allAuthenticatedUsers` роль `compute.images.user` командой:
```bash
yc resource-manager folder add-access-binding default \
	--role compute.images.user \
	--subject system:allAuthenticatedUsers
```
Готово. Мы открыли всем аутентифицированным пользователям YC доступ к папке с образом.
Посмотреть список публичных образов можно командой:
```bash
yc compute image list --folder-id standard-images
```
